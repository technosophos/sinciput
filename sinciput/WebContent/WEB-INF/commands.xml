<?xml version="1.0" encoding="UTF-8"?>
<commands>
	<loadclass name="VerifyEnv"       class="com.technosophos.sinciput.commands.install.VerifyEnvironment" />
	<loadclass name="InstallBase"     class="com.technosophos.sinciput.commands.install.InstallBase" />
	<loadclass name="AddUser"     class="com.technosophos.sinciput.commands.admin.AddUser" />
	<loadclass name="CreateUserRepository"     class="com.technosophos.sinciput.commands.admin.CreateUserRepository" />
	<loadclass name="AddUserRole"     class="com.technosophos.sinciput.commands.admin.AddUserRole" />
	<loadclass name="InstallRedirect" class="com.technosophos.sinciput.commands.install.InstallRedirect"/>
	<loadclass name="AuthN" class="com.technosophos.sinciput.commands.auth.BasicRepositoryAuthN"/>
	<loadclass name="AuthNLogout" class="com.technosophos.sinciput.commands.auth.BasicRepositoryAuthNLogout"/>
	<loadclass name="RequireAuthN" class="com.technosophos.sinciput.commands.auth.BasicRepositoryRequireAuthN"/>
	<loadclass name="GetDocument"     class="com.technosophos.rhizome.command.GetDocument"/>
	<!--  
	loadclass name="info" class="com.technosophos.rhizome.command.http.DisplayInfo"
	loadclass name="URLInfo" class="com.technosophos.rhizome.command.http.URLInfo"
	-->
	<loadclass name="DumpConfiguration" class="com.technosophos.rhizome.command.util.DumpConfiguration"/>
	<loadclass name="template" class="com.technosophos.rhizome.command.template.DoVelocityTemplate"/>
	<requests>
		<global>
			<param name="base_path">
				<value><?path base_path ?></value>
			</param>
			<param name="template_path">
				<value><?path config_path?>templates/</value>
			</param>
			<param name="real_css_path">
				<value><?path resource_path?>css/</value>
			</param>
			<param name="base_url">
				<value><?path url?></value>
			</param>
		</global>
		<request name="install">
			<cmd do="VerifyEnv" fatal="true"/>
			<cmd do="InstallBase" fatal="true"/>
			<cmd do="template">
				<param name="template_name">install.xhtml</param>
			</cmd>
		</request>
		<request name="install2">
			<cmd do="AddUser">
				<param name="default_role">admin</param>
			</cmd>
			<cmd do="CreateUserRepository"/>
			<cmd do="template">
				<param name="template_name">install2.xhtml</param>
			</cmd>
		</request>
		<request name="loginform">
			<cmd do="template">
				<param name="template_name">login_form.vt</param>
			</cmd>
		</request>
		<request name="login">
			<cmd do="AuthN" prefix="auth-">
				<param name="auth_failed">loginform</param>
			</cmd>
		</request>
		<request name="logout">
			<cmd do="AuthNLogout">
				<param name="auth">loginform</param>
			</cmd>
		</request>
		<request name="default">
			<cmd do="InstallRedirect" fatal="true"/>
			<cmd do="RequireAuthN" fatal="true"/>
			<cmd do="DumpConfiguration"/>
			<cmd do="template">
				<param name="template_name">default.vt</param>
			</cmd>
			<!-- cmd do="DisplayInfo"/ -->
		</request>
		<request name="info">
			<cmd do="URLInfo" prefix="test-"/>
			<cmd do="info"/>
		</request>
		<request name="doc">
			<cmd do="GetDocument">
			</cmd>
		</request>	
	</requests>
</commands>